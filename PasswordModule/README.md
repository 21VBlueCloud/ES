# 帐号安全模块

当我们运行某些命令或执行某些脚本的时候，可能需要用到ada帐号或以其它身份运行。这时，我们就需要手动输入用户名和密码，用于创建相应的凭据。每次创建该凭据都需要输入用户名和密码，这对于我们来说可能太不方便。但在很长的一段时间里，我并没有注意到Microsoft.PowerShell.Securty模块中的ConvertFrom-SecureString和ConvertTo-SecureString可以将安全字符串和加密字符串进行相互的转换。直到孙跃军来到，并首先使用了这一方法。

本模块的设计目的，是让我们能在MOR（即SPO的debug box）上创建一个用于存储凭据的地方。在我们需要获取帐号凭据的时候，不用每次都输入密码。

由于这两个命令会使用计算机和当前用户的唯一识别码对安全字符串进行加密，所以在解密的时候必须是相同的用户在同一台计算机上进行。否则，将不能解密。这一安全策略，使得加密后的密码非常安全。

本模块的设计思想如下：

1. 需要在不同计算机上分别创建加密凭据用于存储。
2. 加密凭据存储到用户目录中。
3. 加密凭据应加入密码过期时间戳，在读取加密凭据时能及时提示密码是否过期。
4. 提供加密凭据密码更新命令，可提供同时更新加密凭据和域帐号密码功能。

根据设计思想，主要命令包括：

1. New-SecretCredential：为本机创新建的加密凭据文件。
2. Set-SecretCredential：更新本机的加密凭据。加入开关参数，可同时更新域帐户密码。
3. Test-SecretCredential：用于测试加密凭据是否可用。
4. Remove-SecretCrednetial：删除本机凭据。
5. Get-SecretCredential：获取本机凭据，将其转换为PSCredential对象。每次获取凭据时，应检查密码是否为有效密码。
6. Show-SecretCredential：显示本机凭据列表。

详细使用方法请参考Get-Help获得。

关于Json存储的数据结构，请参考“DataStructure.md”。
